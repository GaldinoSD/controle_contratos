{% extends "base.html" %}
{% block content %}

<!-- ======================================================= -->
<!-- =================== HEADER PREMIUM ==================== -->
<!-- ======================================================= -->

<section class="mb-8 relative">

  <div class="overflow-hidden rounded-2xl p-6 shadow-2xl 
              backdrop-blur-xl border
              bg-slate-900/80 dark:bg-slate-900/80 light:bg-white/70
              border-slate-800 dark:border-slate-800 light:border-slate-300
              relative">

    <div class="absolute -top-10 -left-10 w-40 h-40 
                bg-blue-600/20 dark:bg-blue-600/20 light:bg-blue-500/10
                blur-3xl rounded-full opacity-30"></div>

    <div class="relative flex items-center gap-4">

      <div class="p-3 
                  bg-blue-600/20 dark:bg-blue-600/20 light:bg-blue-500/10
                  rounded-xl border 
                  border-blue-500/30 dark:border-blue-500/30 light:border-blue-300/40 shadow">
        <i class="fa-solid fa-list-check 
                  text-blue-400 dark:text-blue-400 light:text-blue-600 
                  text-2xl"></i>
      </div>

      <div>
        <h1 class="text-3xl font-extrabold 
                   text-white dark:text-white light:text-slate-800 tracking-tight">
          Atividades Pendentes
        </h1>

        <p class="text-sm mt-1 
                  text-slate-400 dark:text-slate-400 light:text-slate-600">
          Conclua suas atividades atribuídas
        </p>
      </div>

    </div>

  </div>

</section>



<!-- ======================================================= -->
<!-- ======================= GRID DE CARDS ================== -->
<!-- ======================================================= -->

{% if tasks %}

<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-7">

  {% for t in tasks %}

  <div
    class="relative rounded-2xl p-6 overflow-hidden
           backdrop-blur-xl shadow-xl
           bg-slate-900/70 dark:bg-slate-900/70 light:bg-white/70
           border border-slate-800 dark:border-slate-800 light:border-slate-300
           hover:shadow-blue-900/30 hover:-translate-y-[2px]
           transition-all duration-300">

    <!-- Glow interno -->
    <div class="absolute inset-0 
                bg-gradient-to-br 
                from-blue-600/10 dark:from-blue-600/10 light:from-blue-500/5
                via-transparent 
                to-slate-900/10 dark:to-slate-900/10 light:to-slate-300/20
                pointer-events-none"></div>

    <div class="relative z-10">

      <!-- EMPRESA -->
      <h2 class="text-lg font-bold flex items-center gap-2
                 text-white dark:text-white light:text-slate-800">
        <i class="fa-solid fa-building 
                  text-blue-400 dark:text-blue-400 light:text-blue-600"></i>
        {{ t.contract.company.name }}
      </h2>

      <p class="text-sm 
                text-slate-400 dark:text-slate-400 light:text-slate-600">
        CNPJ: {{ t.contract.company.cnpj }}
      </p>

      <p class="mt-1 text-xs 
                text-slate-500 dark:text-slate-500 light:text-slate-500">
        Vigência: {{ t.contract.start_date }} → {{ t.contract.end_date }}
      </p>

      <hr class="my-4 
                 border-slate-700/40 dark:border-slate-700/40 light:border-slate-300">

      <!-- TÍTULO DA TAREFA -->
      <h3 class="text-xl font-semibold 
                 text-white dark:text-white light:text-slate-800">
        {{ t.title }}
      </h3>

      <p class="mt-2 text-sm leading-relaxed
                text-slate-300 dark:text-slate-300 light:text-slate-700">
        {{ t.description or "Sem descrição adicional." }}
      </p>

      <p class="mt-3 text-sm flex items-center gap-2
                text-slate-400 dark:text-slate-400 light:text-slate-600">
        <i class="fa-regular fa-calendar 
                  text-slate-300 dark:text-slate-300 light:text-slate-700"></i>
        Prazo: {{ t.due_date }}
      </p>


      <!-- ================================================= -->
      <!-- =============== FORMULÁRIO ====================== -->
      <!-- ================================================= -->

      <form action="/task/complete/{{ t.id }}" 
            method="POST" 
            enctype="multipart/form-data"
            class="mt-6 space-y-4">

        <!-- DESCRIÇÃO DO QUE FOI FEITO -->
        <div>
          <label class="text-sm font-medium 
                        text-slate-300 dark:text-slate-300 light:text-slate-700">
            Descreva o que foi feito
          </label>
          <textarea name="note" required
            class="w-full p-3 text-sm rounded-xl backdrop-blur
                   bg-slate-800/40 dark:bg-slate-800/40 light:bg-white/80
                   text-slate-200 dark:text-slate-200 light:text-slate-900
                   border border-slate-700 dark:border-slate-700 light:border-slate-400
                   focus:ring-2 focus:ring-blue-400 focus:outline-none"></textarea>
        </div>

        <!-- ANEXO -->
        <div>
          <label class="text-sm font-medium 
                        text-slate-300 dark:text-slate-300 light:text-slate-700">
            Anexo (opcional)
          </label>
          <input type="file" name="file"
            class="w-full p-2 text-sm rounded-xl cursor-pointer backdrop-blur
                   bg-slate-800/40 dark:bg-slate-800/40 light:bg-white/80
                   text-slate-200 dark:text-slate-200 light:text-slate-900
                   border border-slate-700 dark:border-slate-700 light:border-slate-400
                   focus:outline-none">
        </div>

        <!-- BOTÃO -->
        <button
          class="w-full py-2.5 rounded-xl font-semibold shadow-lg
                 flex items-center justify-center gap-2
                 text-white
                 bg-emerald-600/80 hover:bg-emerald-700 
                 dark:bg-emerald-600/80 dark:hover:bg-emerald-700
                 light:bg-emerald-600 light:hover:bg-emerald-700
                 transition">
          <i class="fa-solid fa-check"></i>
          Concluir Tarefa
        </button>

      </form>

    </div>

  </div>

  {% endfor %}

</div>


{% else %}

<p class="text-center mt-12 text-lg 
          text-slate-500 dark:text-slate-500 light:text-slate-600">
  Nenhuma atividade pendente no momento.
</p>

{% endif %}

{% endblock %}
