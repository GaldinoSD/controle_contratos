{% extends "base.html" %}
{% block content %}

<div class="space-y-10">

  <!-- ======================================================
       HEADER COMPACTO — ÁREA DA DIRETORIA
  ====================================================== -->
  <section class="relative overflow-hidden rounded-2xl p-6 shadow-xl 
                  bg-white/70 dark:bg-slate-900/80 
                  border border-slate-300 dark:border-slate-800 
                  backdrop-blur">

    <div class="absolute -top-10 -left-10 w-32 h-32 bg-blue-500/10 dark:bg-blue-600/20 
                blur-2xl rounded-full opacity-40"></div>

    <div class="relative flex flex-col md:flex-row md:items-center md:justify-between gap-4">

      <!-- ESQUERDA -->
      <div class="flex items-center gap-4">
        <span class="p-3 bg-blue-500/10 dark:bg-blue-600/20 
                     border border-blue-300/40 dark:border-blue-500/40 
                     rounded-xl shadow">
          <i class="fa-solid fa-user-shield text-2xl text-blue-600 dark:text-blue-300"></i>
        </span>

        <div>
          <h1 class="text-2xl font-bold text-slate-800 dark:text-white tracking-tight">
            Área da Diretoria
          </h1>

          <p class="text-xs text-slate-600 dark:text-slate-400 mt-1">
            Gerenciamento de contas administrativas.
          </p>
        </div>
      </div>

      <!-- DIREITA -->
      <div class="flex flex-col items-start md:items-end gap-1">

        <button onclick="abrirModalNovoAdmin()"
                class="bg-blue-600 hover:bg-blue-700 text-white font-semibold 
                       px-5 py-2 rounded-lg shadow flex items-center gap-2">
          <i class="fa-solid fa-user-plus text-sm"></i>
          Novo Admin
        </button>

        <p class="text-[10px] text-slate-500 dark:text-slate-400">Perfis essenciais apenas.</p>
      </div>

    </div>
  </section>



  <!-- ======================================================
       GRID DE ADMINISTRADORES — CARDS COMPACTOS
  ====================================================== -->
  <section class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">

    {% for admin in admins %}
    <div class="relative p-4 rounded-2xl shadow-xl 
                bg-white dark:bg-slate-900/70 
                border border-slate-300 dark:border-slate-800
                backdrop-blur hover:-translate-y-[2px]
                hover:shadow-blue-800/30 dark:hover:shadow-blue-900/40
                transition-all duration-300">

      <!-- FITA -->
      {% if admin.email == 'admin@admin.com' %}
      <div class="absolute -top-2 -right-2">
        <span class="inline-flex items-center gap-1 px-2 py-0.5 text-[10px]
                     rounded-full bg-yellow-300 text-slate-800 font-bold shadow 
                     border border-yellow-400">
          <i class="fa-solid fa-crown text-xs"></i> Super
        </span>
      </div>
      {% else %}
      <div class="absolute -top-2 -right-2">
        <span class="inline-flex items-center gap-1 px-2 py-0.5 text-[10px]
                     rounded-full bg-slate-200 dark:bg-slate-800 
                     text-slate-800 dark:text-slate-200 
                     border border-slate-300 dark:border-slate-700 shadow">
          <i class="fa-solid fa-user-tie text-xs"></i> Admin
        </span>
      </div>
      {% endif %}


      <!-- TOPO -->
      <div class="flex items-center gap-4 mb-4">

        <div class="w-12 h-12 rounded-xl bg-gradient-to-br 
                    from-blue-600 to-blue-400 dark:from-blue-700 dark:to-blue-500
                    flex items-center justify-center shadow 
                    border border-blue-300/40 dark:border-blue-500/40">
          <span class="text-white text-lg font-bold">
            {{ admin.name[0:2] | upper }}
          </span>
        </div>

        <div>
          <h2 class="text-base font-bold text-slate-800 dark:text-white">{{ admin.name }}</h2>
          <p class="text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1">
            <i class="fa-solid fa-envelope text-slate-400 text-xs"></i>
            {{ admin.email }}
          </p>
        </div>

      </div>

      <div class="h-[1px] bg-gradient-to-r 
                  from-blue-400/30 via-cyan-400/30 to-blue-400/30 opacity-60 mb-4">
      </div>

      <!-- Acesso -->
      <div class="flex items-center gap-2 text-[11px] 
                  text-slate-600 dark:text-slate-400 mb-4">
        <i class="fa-solid fa-shield-halved text-blue-500 dark:text-blue-400 text-sm"></i>
        Acesso total ao painel administrativo
      </div>

      <!-- BOTÕES -->
      <div class="flex justify-between gap-2">

        <button 
          onclick="abrirModalEditarAdmin(this)"
          data-id="{{ admin.id }}"
          data-nome="{{ admin.name }}"
          data-email="{{ admin.email }}"
          class="flex-1 px-3 py-1.5 rounded-lg 
                 bg-blue-100 dark:bg-blue-600/20 
                 text-blue-700 dark:text-blue-300 
                 border border-blue-300 dark:border-blue-500/30
                 hover:bg-blue-200 dark:hover:bg-blue-600/30 
                 hover:text-blue-900 dark:hover:text-white 
                 transition shadow text-xs font-medium flex items-center justify-center gap-1">
          <i class="fa-solid fa-pen text-xs"></i> Editar
        </button>

        <button 
          onclick="abrirModalExcluirAdmin({{ admin.id }})"
          class="flex-1 px-3 py-1.5 rounded-lg 
                 bg-red-100 dark:bg-red-600/20 
                 text-red-700 dark:text-red-300 
                 border border-red-300 dark:border-red-500/30
                 hover:bg-red-200 dark:hover:bg-red-600/30 
                 hover:text-red-900 dark:hover:text-white 
                 transition shadow text-xs font-medium flex items-center justify-center gap-1">
          <i class="fa-solid fa-trash text-xs"></i> Excluir
        </button>

      </div>

    </div>
    {% endfor %}



    {% if admins|length == 0 %}
    <div class="col-span-full text-center border-2 border-dashed 
                border-slate-300 dark:border-slate-700
                rounded-2xl p-14 
                bg-white/70 dark:bg-slate-900/50 
                backdrop-blur shadow-xl">

      <i class="fa-solid fa-user-shield text-4xl text-slate-500 dark:text-slate-600 mb-3"></i>

      <h3 class="text-lg text-slate-800 dark:text-white font-semibold">Nenhum administrador</h3>
      <p class="text-xs text-slate-600 dark:text-slate-400 mb-4">Cadastre o primeiro membro da diretoria.</p>

      <button onclick="abrirModalNovoAdmin()"
              class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow text-sm">
        <i class="fa-solid fa-user-plus"></i> Cadastrar
      </button>

    </div>
    {% endif %}

  </section>

</div>




<!-- ======================================================
     MODAIS — AGORA TAMBÉM LIGHT/DARK
====================================================== -->

<!-- NOVO ADMIN -->
<div id="modalNovoAdmin"
     class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
  <div class="bg-white dark:bg-slate-900 p-5 rounded-2xl shadow-2xl 
              max-w-sm w-full border border-slate-300 dark:border-slate-700 relative">

    <button class="absolute top-2 right-3 text-slate-500 dark:text-slate-400 
                   hover:text-red-400 text-xl"
            onclick="fecharModalNovoAdmin()">&times;</button>

    <h2 class="text-xl font-bold mb-5 flex items-center gap-2 text-slate-800 dark:text-slate-100">
      <span class="p-2 rounded-xl bg-blue-500/10 dark:bg-blue-600/20 
                   border border-blue-400/40">
        <i class="fa-solid fa-user-plus text-blue-600 dark:text-blue-400 text-sm"></i>
      </span>
      Novo Administrador
    </h2>

    <form method="POST" action="/administradores/salvar" class="space-y-3">

      <div>
        <label class="text-slate-600 dark:text-slate-300 text-xs">Nome completo</label>
        <input type="text" name="nome" required
               class="w-full px-3 py-2 text-sm bg-slate-100 dark:bg-slate-800 
                      border border-slate-300 dark:border-slate-700 
                      rounded-lg text-slate-800 dark:text-slate-100">
      </div>

      <div>
        <label class="text-slate-600 dark:text-slate-300 text-xs">E-mail</label>
        <input type="email" name="email" required
               class="w-full px-3 py-2 text-sm bg-slate-100 dark:bg-slate-800 
                      border border-slate-300 dark:border-slate-700 
                      rounded-lg text-slate-800 dark:text-slate-100">
      </div>

      <div>
        <label class="text-slate-600 dark:text-slate-300 text-xs">Senha inicial</label>
        <input type="password" name="senha" required
               class="w-full px-3 py-2 text-sm bg-slate-100 dark:bg-slate-800 
                      border border-slate-300 dark:border-slate-700 
                      rounded-lg text-slate-800 dark:text-slate-100">
      </div>

      <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg shadow text-sm font-semibold">
        Salvar
      </button>

    </form>

  </div>
</div>




<!-- EDITAR ADMIN -->
<div id="modalEditarAdmin"
     class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
  <div class="bg-white dark:bg-slate-900 p-5 rounded-2xl shadow-2xl max-w-sm w-full border 
              border-slate-300 dark:border-slate-700 relative">

    <button class="absolute top-2 right-3 text-slate-500 dark:text-slate-400 
                   hover:text-red-400 text-xl"
            onclick="fecharModalEditarAdmin()">&times;</button>

    <h2 class="text-xl font-bold mb-5 flex items-center gap-2 text-slate-800 dark:text-slate-100">
      <span class="p-2 rounded-xl bg-blue-500/10 dark:bg-blue-600/20 border border-blue-400/40">
        <i class="fa-solid fa-user-pen text-blue-600 dark:text-blue-400 text-sm"></i>
      </span>
      Editar Administrador
    </h2>

    <form method="POST" id="formEditarAdmin" class="space-y-3">

      <div>
        <label class="text-slate-600 dark:text-slate-300 text-xs">Nome</label>
        <input id="editar_nome" type="text" name="nome" required
               class="w-full px-3 py-2 text-sm bg-slate-100 dark:bg-slate-800 
                      border border-slate-300 dark:border-slate-700 rounded-lg 
                      text-slate-800 dark:text-slate-100">
      </div>

      <div>
        <label class="text-slate-600 dark:text-slate-300 text-xs">E-mail</label>
        <input id="editar_email" type="email" name="email" required
               class="w-full px-3 py-2 text-sm bg-slate-100 dark:bg-slate-800 
                      border border-slate-300 dark:border-slate-700 
                      rounded-lg text-slate-800 dark:text-slate-100">
      </div>

      <div>
        <label class="text-slate-600 dark:text-slate-300 text-xs">Nova Senha (opcional)</label>
        <input type="password" name="senha"
               class="w-full px-3 py-2 text-sm bg-slate-100 dark:bg-slate-800 
                      border border-slate-300 dark:border-slate-700 
                      rounded-lg text-slate-800 dark:text-slate-100">
      </div>

      <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg shadow text-sm font-semibold">
        Atualizar
      </button>

    </form>

  </div>
</div>




<!-- EXCLUIR ADMIN -->
<div id="modalExcluirAdmin"
     class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50">
  <div class="bg-white dark:bg-slate-900 p-5 rounded-2xl shadow-2xl max-w-sm w-full border 
              border-slate-300 dark:border-slate-700 relative">

    <button class="absolute top-2 right-3 text-slate-500 dark:text-slate-400 
                   hover:text-red-400 text-xl"
            onclick="fecharModalExcluirAdmin()">&times;</button>

    <h2 class="text-lg font-bold mb-3 flex items-center gap-2 text-slate-800 dark:text-slate-100">
      <span class="p-2 rounded-xl bg-red-500/10 dark:bg-red-600/20 border border-red-400/40">
        <i class="fa-solid fa-triangle-exclamation text-red-600 dark:text-red-400"></i>
      </span>
      Confirmar Exclusão
    </h2>

    <p class="text-xs text-slate-600 dark:text-slate-400 mb-4">
      Esta ação removerá o acesso deste administrador ao sistema.
    </p>

    <form method="POST" id="formExcluirAdmin">
      <button class="w-full bg-red-600 hover:bg-red-700 text-white py-2 
                     rounded-lg shadow text-sm font-semibold">
        Excluir
      </button>
    </form>

  </div>
</div>




<!-- ======================================================
     SCRIPTS
====================================================== -->
<script>
  function abrirModalNovoAdmin() { document.getElementById("modalNovoAdmin").classList.remove("hidden"); }
  function fecharModalNovoAdmin() { document.getElementById("modalNovoAdmin").classList.add("hidden"); }

  function abrirModalEditarAdmin(btn) {
    const id = btn.dataset.id;
    document.getElementById("editar_nome").value = btn.dataset.nome;
    document.getElementById("editar_email").value = btn.dataset.email;
    document.getElementById("formEditarAdmin").action = "/administradores/editar/" + id;
    document.getElementById("modalEditarAdmin").classList.remove("hidden");
  }
  function fecharModalEditarAdmin() { document.getElementById("modalEditarAdmin").classList.add("hidden"); }

  function abrirModalExcluirAdmin(id) {
    document.getElementById("formExcluirAdmin").action = "/administradores/excluir/" + id;
    document.getElementById("modalExcluirAdmin").classList.remove("hidden");
  }
  function fecharModalExcluirAdmin() { document.getElementById("modalExcluirAdmin").classList.add("hidden"); }
</script>

{% endblock %}
